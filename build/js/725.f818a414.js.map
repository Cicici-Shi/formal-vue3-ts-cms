{"version":3,"file":"js/725.f818a414.js","mappings":"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","sources":["webpack://vue3-ts-cms/./src/hooks/use-page-search.ts","webpack://vue3-ts-cms/./src/views/main/system/user/user.vue?cfdc","webpack://vue3-ts-cms/./src/views/main/system/user/config/search.config.ts","webpack://vue3-ts-cms/./src/views/main/system/user/config/content.config.ts","webpack://vue3-ts-cms/./src/views/main/system/user/config/modal.config.ts","webpack://vue3-ts-cms/./src/views/main/system/user/user.vue?b2f6","webpack://vue3-ts-cms/./src/views/main/system/user/user.vue"],"sourcesContent":["import { ref } from \"vue\";\nimport PageContent from \"@/components/page-content\";\n\nexport function usePageSearch() {\n  const pageContentRef = ref<InstanceType<typeof PageContent>>(); //pageContentRef就是PageContent类型\n  const handleResetClick = () => {\n    pageContentRef.value?.getPageData(); //可选链，value没有值，后面就不会调用\n  };\n  const handleQueryClick = (queryInfo: any) => {\n    pageContentRef.value?.getPageData(queryInfo);\n  };\n  return [pageContentRef, handleResetClick, handleQueryClick]; //看成元祖\n}\n//   return [pageTabelRef, resetBtnClic, searchBtnClic];\n","import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"user\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_page_search = _resolveComponent(\"page-search\")!\n  const _component_page_content = _resolveComponent(\"page-content\")!\n  const _component_page_modal = _resolveComponent(\"page-modal\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_page_search, {\n      searchFormConfig: _ctx.searchFormConfig,\n      onResetBtnClick: _ctx.handleResetClick,\n      onQueryBtnClick: _ctx.handleQueryClick\n    }, null, 8, [\"searchFormConfig\", \"onResetBtnClick\", \"onQueryBtnClick\"]),\n    _createVNode(_component_page_content, {\n      ref: \"pageContentRef\",\n      contentTableConfig: _ctx.contentTableConfig,\n      pageName: \"users\",\n      onNewBtnClick: _ctx.handleNewData,\n      onEditBtnClick: _ctx.handleEditData\n    }, null, 8, [\"contentTableConfig\", \"onNewBtnClick\", \"onEditBtnClick\"]),\n    _createVNode(_component_page_modal, {\n      defaultInfo: _ctx.defaultInfo,\n      ref: \"pageModalRef\",\n      pageName: \"users\",\n      modalConfig: _ctx.modalConfigRef\n    }, null, 8, [\"defaultInfo\", \"modalConfig\"])\n  ]))\n}","import { IForm } from \"@/base-ui/form\";\n\nexport const searchFormConfig: IForm = {\n  labelWidth: \"120px\",\n  itemStyle: {\n    padding: \"10px 40px\",\n  },\n  colLayout: {\n    span: 8,\n  },\n  formItems: [\n    {\n      field: \"id\",\n      type: \"input\",\n      label: \"id\",\n      placeholder: \"请输入id\",\n    },\n    {\n      field: \"name\",\n      type: \"input\",\n      label: \"用户名\",\n      placeholder: \"请输入用户名\",\n    },\n    {\n      field: \"realname\",\n      type: \"input\",\n      label: \"真实姓名\",\n      placeholder: \"请输入真实姓名\",\n    },\n    {\n      field: \"cellphone\",\n      type: \"input\",\n      label: \"电话号码\",\n      placeholder: \"请输入电话号码\",\n    },\n    {\n      field: \"enable\",\n      type: \"select\",\n      label: \"用户状态\",\n      placeholder: \"请选择用户状态\",\n      options: [\n        { title: \"启用\", value: 1 },\n        { title: \"禁用\", value: 0 },\n      ],\n    },\n    {\n      field: \"createAt\",\n\n      type: \"datepicker\",\n      label: \"创建时间\",\n      otherOptions: {\n        startPlaceholder: \"开始时间\",\n        endPlaceholder: \"结束时间\",\n        type: \"daterange\",\n      },\n    },\n  ],\n};\n","export const contentTableConfig = {\n  title: \"用户列表\",\n  propList: [\n    { prop: \"name\", label: \"用户名\", minWidth: \"100\" },\n    { prop: \"realname\", label: \"真实姓名\", minWidth: \"100\" },\n    { prop: \"cellphone\", label: \"手机号码\", minWidth: \"100\" },\n    { prop: \"enable\", label: \"状态\", minWidth: \"100\", slotName: \"status\" },\n    {\n      prop: \"createAt\",\n      label: \"创建时间\",\n      minWidth: \"250\",\n      slotName: \"createAt\",\n    },\n    {\n      prop: \"updateAt\",\n      label: \"更新时间\",\n      minWidth: \"250\",\n      slotName: \"updateAt\",\n    },\n    { label: \"操作\", minWidth: \"120\", slotName: \"handler\" },\n  ],\n  showIndexColumn: true, //如果不想要序号，就不传或者传false\n  showSelectColumn: true,\n};\n","import { IForm } from \"@/base-ui/form\";\n\nexport const modalConfig: IForm = {\n  formItems: [\n    {\n      field: \"name\",\n      type: \"input\",\n      label: \"用户名\",\n      placeholder: \"请输入用户名\",\n    },\n    {\n      field: \"realname\",\n      type: \"input\",\n      label: \"真实姓名\",\n      placeholder: \"请输入真实姓名\",\n    },\n    {\n      field: \"password\",\n      type: \"password\",\n      label: \"用户密码\",\n      placeholder: \"请输入密码\",\n      isHidden: false, //有的formItems要隐藏，有的不用，所以不能写到hook中。isHidden设在了base-ui的form.vue。false默认不隐藏，新建设为false，编辑设为true。是true还是false是页面的，例如user.vue\n    },\n    {\n      field: \"cellphone\",\n      type: \"input\",\n      label: \"电话号码\",\n      placeholder: \"请输入电话号码\",\n    },\n    {\n      field: \"departmentId\",\n      type: \"select\",\n      label: \"选择部门\",\n      placeholder: \"请选择部门\",\n      options: [],\n    },\n    {\n      field: \"roleId\",\n      type: \"select\",\n      label: \"选择角色\",\n      placeholder: \"请选择角色\",\n      options: [],\n    },\n  ],\n  colLayout: { span: 24 },\n  itemStyle: {}, //不用原来设置的padding\n};\n","\nimport { defineComponent, computed } from \"vue\";\nimport { useStore } from \"@/store\";\n\n//引入三个组件\nimport PageSearch from \"@/components/page-search\";\nimport PageContent from \"@/components/page-content\";\nimport PageModal from \"@/components/page-modal\";\n\n//开发页面只需要写配置文件就行，不用大量重复代码\nimport { searchFormConfig } from \"./config/search.config\";\nimport { contentTableConfig } from \"./config/content.config\";\nimport { modalConfig } from \"./config/modal.config\";\n\nimport { usePageSearch } from \"@/hooks/use-page-search\";\nimport { usePageModal } from \"@/hooks/use-page-modal\";\n\n//这里连逻辑都不需要写，交给导入的组件处理\nexport default defineComponent({\n  name: \"users\",\n  components: {\n    PageSearch,\n    PageContent,\n    PageModal,\n  },\n\n  setup() {\n    //pageSearch的hook\n    const [pageContentRef, handleResetClick, handleQueryClick] =\n      usePageSearch(); //return{...usePageSearch}同理，但是阅读性差\n\n    // pageModal相关的hook逻辑\n    // 1.处理密码的逻辑\n    const newCallback = () => {\n      const passwordItem = modalConfig.formItems.find(\n        (item) => item.field === \"password\"\n      );\n      passwordItem!.isHidden = false; //\n    };\n    const editCallback = () => {\n      const passwordItem = modalConfig.formItems.find(\n        (item) => item.field === \"password\"\n      );\n      passwordItem!.isHidden = true; //不显示\n    };\n\n    // 2.动态从vuex给新建用户添加部门和角色列表\n    const store = useStore();\n    const modalConfigRef = computed(() => {\n      //用了computed，是响应式的，改变就会自动在template刷新\n      const departmentItem = modalConfig.formItems.find(\n        (item) => item.field === \"departmentId\"\n      );\n      departmentItem!.options = store.state.entireDepartment.map((item) => {\n        //要用到store，得import并useStore()。options要求有title和value（之前的search.config.ts有），要转化一下。!断言，肯定会有值的\n        return { title: item.name, value: item.id };\n      });\n\n      const roleItem = modalConfig.formItems.find(\n        (item) => item.field === \"roleId\"\n      );\n      roleItem!.options = store.state.entireRole.map((item) => {\n        return { title: item.name, value: item.id };\n      });\n\n      return modalConfig;\n    });\n\n    // 3.调用hook获取公共变量和函数\n    const [pageModalRef, defaultInfo, handleNewData, handleEditData] =\n      usePageModal(newCallback, editCallback);\n\n    return {\n      searchFormConfig,\n      contentTableConfig,\n      pageContentRef,\n      handleResetClick,\n      handleQueryClick,\n      modalConfigRef,\n      handleNewData,\n      handleEditData,\n      pageModalRef,\n      defaultInfo,\n    };\n  },\n});\n","import { render } from \"./user.vue?vue&type=template&id=387ed5b3&ts=true\"\nimport script from \"./user.vue?vue&type=script&lang=ts\"\nexport * from \"./user.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"D:\\\\code\\\\formal-vue3-ts-cms\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["usePageSearch","pageContentRef","ref","handleResetClick","value","getPageData","handleQueryClick","queryInfo","_hoisted_1","class","render","_ctx","_cache","$props","$setup","$data","$options","_component_page_search","_resolveComponent","_component_page_content","_component_page_modal","_openBlock","_createElementBlock","_createVNode","searchFormConfig","onResetBtnClick","onQueryBtnClick","contentTableConfig","pageName","onNewBtnClick","handleNewData","onEditBtnClick","handleEditData","defaultInfo","modalConfig","modalConfigRef","labelWidth","itemStyle","padding","colLayout","span","formItems","field","type","label","placeholder","options","title","otherOptions","startPlaceholder","endPlaceholder","propList","prop","minWidth","slotName","showIndexColumn","showSelectColumn","isHidden","defineComponent","name","components","PageSearch","PageContent","PageModal","setup","newCallback","passwordItem","find","item","editCallback","store","useStore","computed","departmentItem","state","entireDepartment","map","id","roleItem","entireRole","pageModalRef","usePageModal","__exports__"],"sourceRoot":""}